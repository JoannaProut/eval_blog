[
  {
    "path": "posts/",
    "title": "Notable Black First Achievements Data Visualization",
    "description": "A blog post outlining how I used ggplot to make stacked and facetted area plots looking at cumulative events over time.",
    "author": [
      {
        "name": "Joanna Prout",
        "url": {}
      }
    ],
    "date": "2021-02-22",
    "categories": [],
    "contents": "\r\nThis is my attempt at making a data viz using the tidyverse and ggplot for a challenge from @DiversityinData for Black History Month. The data set from blackpast.org (available at https://data.world/diversityindata/february-2021-black-history-month) included a list of notable Black “first achievements” during the years 1738 - 2021 by category, along with the following quotes:\r\n\r\nThe ‘first’ achievements in various fields have historically marked footholds, often leading to more widespread cultural change. The shorthand phrase for this is “breaking the color barrier”\r\n\r\n\r\n“[Black] history is about much more than chronicling a series of “firsts.” The time and place of a breakthrough reflects not only remarkable individual achievement but is itself an indication of the progress or lack of progress of black people in realizing the centuries-old intertwined goals of freedom, equality, and justice.\" ~ blackpast.org\r\n\r\n\r\nDatasource: Wikipedia & Kaggle\r\n\r\nThese quotes emphasized the importance of BOTH individual and collective impact. I pictured one big wave of impact made up of smaller individual events. I decided to go with a stacked area chart with category of events being the third factor indicated by color. I wanted to have an interactive graph where the viewer could hover over a point and get a tooltip with the specific event, person involved, and other information but do not know how to use plotly well enough yet. Maybe some day!\r\nHere I am loading packages, reading in the data, and changing the color palette and fonts.\r\n\r\n\r\n#Notable Black Achievements\r\nlibrary (tidyverse)\r\nlibrary (showtext)\r\nlibrary (patchwork)\r\nlibrary (knitr)\r\n\r\ndf <- read.csv(\"https://query.data.world/s/conu5g63p5djt76z4v3x2liephcggn\", \r\n               header=TRUE, stringsAsFactors=FALSE)\r\n\r\n#color palette\r\nbfly.col <- c(\"5F706A\", \"#D5B59B\", \"#C84F36\", \"#AE8B6D\", \"#2C2B2C\", \"#61A89D\", \"#E7965F\", \"#793324\")\r\n\r\n## Loading Google fonts (https://fonts.google.com/)\r\nfont_add_google(\"Bebas Neue\")\r\nfont_add_google (\"Lato\")\r\n\r\nshowtext_auto ()\r\n\r\n\r\n\r\nNow getting the dataset into shape to make a stacked wave chart with year as the x axis, cumulative number of achievements as the y axis, and category of achievement as a third factor differentiated by color.\r\n\r\n\r\ndf1 <- df %>%\r\n  group_by (year, category) %>%\r\n  summarize (n = n()) %>%\r\n  ungroup %>%\r\n  group_by (category) %>%\r\n  mutate (csum = cumsum (n))\r\n\r\nallyears <- df1 %>% \r\n  group_by(category) %>% \r\n  complete(year = full_seq(1738:2021, 1)) %>% \r\n  group_by (category) %>%\r\n  fill(csum)\r\n\r\nallyears[is.na(allyears)] <- 0\r\nallyears$category <- as.factor (allyears$category)\r\n\r\n\r\n\r\nMaking the stacked area chart..\r\n\r\n\r\nplot <- ggplot (allyears, aes (x=year, y=csum, fill = category)) + \r\n  geom_area () + \r\n  scale_y_continuous (position = \"right\")\r\n\r\nplot_total <- plot + theme (text = element_text (family = \"Lato\", size = 15),\r\n                                   legend.position = \"none\",\r\n                   panel.grid = element_blank (),\r\n                   axis.line.x = element_line (),\r\n                   axis.text.y = element_blank (),\r\n                   axis.ticks.x = element_blank (),\r\n                   axis.ticks.y = element_blank (),\r\n                   panel.background = element_rect(color = \"#E3E4E1\", fill = \"#E3E4E1\"), #ice cube\r\n                   plot.background = element_rect(color = \"#e3e4e1\", fill = \"#e3e4e1\")) +\r\n            scale_fill_manual (values = bfly.col) +\r\n  labs (x = \"Year\", y = \"Achievements\")\r\n\r\nplot_total\r\n\r\n\r\n\r\n\r\nOne of the limitations of the stacked area chart is that it is difficult to compare the patterns between categories. To help address this, I used facet_wrap to make 8 smaller plots, one for each category. I kept the colors the same so the viewer can hopefully link the information from the stacked plot to the facetted plot.\r\n\r\n\r\nfacets <- ggplot (allyears, aes (x=year, y=csum, fill = category)) + \r\n    geom_area () +\r\n    facet_wrap(~category, nrow = 2, strip.position = \"bottom\") +\r\n  theme (text=element_text (family = \"Lato\", size = 15))\r\n\r\nfacets\r\n\r\n\r\n\r\n\r\nThen I added in the title, colors, and theme elements.\r\n\r\n\r\nfacets_final <- facets +  \r\n  labs (x = \" \", y = \" \", caption = \"Data from blackpast.org | for @DiversityinData | graphic @joieprout\", title = \"\\nBlack history is about more than chronicling a series of 'firsts'\",\r\n                  subtitle = \"\\nThe time and place of a breakthrough reflects \\nnot only remarkable individual achievement\\nbut is itself an indication of the progress \\nor lack of progress of Black people\\nin realizing the centuries-old intertwined goals\\nof freedom, equality, and justice. \\n\\n~ blackpast.org\") +\r\n  scale_fill_manual (values = c(\"5F706A\", \"#D5B59B\", \"#C84F36\", \"#AE8B6D\", \"#2C2B2C\", \"#61A89D\", \"#E7965F\", \"#793324\")) +\r\n  theme (text = element_text (family = \"Lato\", size = 20),\r\n            plot.title = element_text (family = \"Bebas Neue\", face = \"bold\", size = 30),\r\n                   plot.subtitle = element_text (family = \"Lato\", face = \"italic\", size = 20),\r\n         legend.position = \"none\",\r\n         strip.background = element_rect(\r\n           color=\"#D5B59B\", fill=\"#d5b59b\", size=1.5, linetype=\"solid\"\r\n         ),\r\n         panel.grid = element_blank (),\r\n         panel.background = element_rect(color = \"#e3e4e1\", fill = \"#e3e4e1\"),\r\n         plot.background = element_rect(color = \"#e3e4e1\", fill = \"#e3e4e1\"),\r\n         axis.text.y = element_blank (),\r\n         axis.ticks.y = element_blank (),\r\n         axis.ticks.x = element_blank ()) \r\n\r\nfacets_final\r\n\r\n\r\n\r\n\r\nFinally, I used the patchwork package’s inset element function to put the combined area chart at the top of the facetted charts. I really wanted to have both available on the same visualization.\r\nLooking at both the stacked chart and the small multiple charts shows both the collective impact and thst while many achievements have been made in some areas, other areas, like Law, seem to have more limited opportunities and support for achievement by Black people in the United States.\r\n\r\n\r\ncombo <- facets_final + \r\n  inset_element(plot_total, left = 0.5, bottom = 0.6, right = 0.9, top = 0.9, align_to = 'full')\r\ncombo\r\n\r\n\r\n\r\n\r\nAn ongoing problem I have is that if I make a chart that looks okay for the blog then I have to change the font sizing around to make an image file where all the words aren’t teeny-tiny. I am not sure if there is a better way around this? A search is underway. Here is what I managed for this image. . .\r\n\r\n\r\n\r\n\r\n\r\ninclude_graphics (\"combo.png\")\r\n\r\n\r\n\r\n\r\n\r\n\r\nfacets_final_img <- facets +  \r\n  labs (x = \" \", y = \" \", caption = \"Data from blackpast.org | for @DiversityinData | graphic @joieprout\", title = \"\\nBlack history is about more than chronicling a series of 'firsts'\",\r\n                  subtitle = \"\\nThe time and place of a breakthrough reflects \\nnot only remarkable individual achievement\\nbut is itself an indication of the progress \\nor lack of progress of Black people\\nin realizing the centuries-old intertwined goals\\nof freedom, equality, and justice.\\n~ blackpast.org\") +\r\n  scale_fill_manual (values = c(\"5F706A\", \"#D5B59B\", \"#C84F36\", \"#AE8B6D\", \"#2C2B2C\", \"#61A89D\", \"#E7965F\", \"#793324\")) +\r\n  theme (text = element_text (family = \"Lato\", size = 18),\r\n                plot.title = element_text (family = \"Bebas Neue\", face = \"bold\", size = 30),\r\n                plot.subtitle = element_text (family = \"Lato\", face = \"italic\", lineheight = 0.8, size = 16),\r\n         legend.position = \"none\",\r\n         strip.background = element_rect(\r\n           color=\"#D5B59B\", fill=\"#d5b59b\", size=1.5, linetype=\"solid\"\r\n         ),\r\n         panel.grid = element_blank (),\r\n         panel.background = element_rect(color = \"#e3e4e1\", fill = \"#e3e4e1\"),\r\n         plot.background = element_rect(color = \"#e3e4e1\", fill = \"#e3e4e1\"),\r\n         axis.text.y = element_blank (),\r\n         axis.ticks.y = element_blank (),\r\n         axis.ticks.x = element_blank ()) \r\n\r\n#Combined wave chart with bigger font\r\nplot_total_img <- plot + theme (text = element_text (family = \"Lato\", size = 18),\r\n                                   legend.position = \"none\",\r\n                   panel.grid = element_blank (),\r\n                   axis.line.x = element_line (),\r\n                   axis.text.y = element_blank (),\r\n                   axis.ticks.x = element_blank (),\r\n                   axis.ticks.y = element_blank (),\r\n                   panel.background = element_rect(color = \"#E3E4E1\", fill = \"#E3E4E1\"), #ice cube\r\n                   plot.background = element_rect(color = \"#e3e4e1\", fill = \"#e3e4e1\")) +\r\n            scale_fill_manual (values = bfly.col) +\r\n  labs (x = \"Year\", y = \"Achievements\")\r\n\r\ncombo <- facets_final_img + \r\n  inset_element(plot_total_img, left = 0.5, bottom = 0.6, right = 1, top = 0.8, align_to = 'full')\r\n\r\nggsave (\"combo.pdf\", height = 8, width = 10)\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-02-23T19:01:04-05:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-02-06-welcome/",
    "title": "Tidy Tuesday 2021, Week 7: ",
    "description": "Data on Wealth and Income Over Time | Urban Institute & US Census",
    "author": [
      {
        "name": "Joanna Prout",
        "url": {}
      }
    ],
    "date": "2021-02-11",
    "categories": [],
    "contents": "\r\nFor this week’s Tidy Tuesday challenge we looked at data about wealth and inequality in the United States. I did a simple area plot of the median wealth of Black, Hispanic, and White families from 1989-2016. The disparity is huge! The visualization shows that while the wealth of White families increased and decreased as a function of economic changes; the wealth of Blank and Hispanic families remained low.\r\n\r\n\r\nmedian_wealth_race <- race_wealth %>% \r\n  filter (type == \"Median\") %>%\r\n  filter (year >= 1989) %>%\r\n  filter (race != \"Non-White\")\r\n\r\n## Automatically use showtext to render text\r\nshowtext_auto()\r\n\r\nplot <- ggplot (median_wealth_race, \r\n        aes (x = year, \r\n             y = wealth_family, \r\n             group=race, \r\n             fill = race)) + \r\n geom_area(color = \"white\") +\r\n  labs (title = \"Median Wealth of US Families by Race Over Time\",\r\n          subtitle = \"In Dollars Normalized for 2016\",\r\n          caption = \"Data from Urban Institute and US Census | Graphic by @joieprout\",\r\n          x = \" \",\r\n          y = \" \") +\r\n  facet_wrap (~race) +\r\n  theme (text = element_text (family = \"Montserrat\", size = 22),\r\n         plot.title = element_text (face = \"bold\", size = 24),\r\n         legend.position = \"none\",\r\n         panel.grid = element_blank (),\r\n         axis.text.x = element_text (size = 14),\r\n         axis.text.y = element_text (size = 14),\r\n         axis.ticks.y = element_blank (),\r\n         axis.ticks.x = element_blank (),\r\n          panel.background = element_rect(color = \"gray93\", fill = \"gray93\"),\r\n          plot.background = element_rect(color = \"white\", fill = \"white\"),\r\n          strip.background = element_rect(color = \"gray80\", fill = \"gray80\"),    \r\n          plot.margin = margin(0.5, 0.5, 0.5, 0.5, \"cm\"))+\r\n  scale_y_continuous(label = comma) +\r\n  scale_fill_brewer(palette=\"Dark2\")\r\n\r\nplot\r\n\r\n\r\n\r\nggsave (\"wealthplot.pdf\", width = 10, height = 6)\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-02-12T19:25:18-05:00",
    "input_file": {}
  }
]
